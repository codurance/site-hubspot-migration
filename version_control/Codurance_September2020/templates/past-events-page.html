<!--
    templateType: page
    isAvailableForNewContent: true
    label: Past Events
-->
{% extends "./layouts/base.html" %}

{% import '../snippets/button-snippets.html' as snippets %}

<head>
  <meta charset="utf-8">
  <title>{{ page_meta.html_title }}</title>
  {% if site_settings.favicon_src %}
  <link rel="shortcut icon" href="{{ site_settings.favicon_src }}" />
  {% endif %}
  <meta name="description" content="{{ page_meta.meta_description }}">
  {{ require_css(get_asset_url("../css/layout.css")) }}
  {{ require_css(get_asset_url("../css/main.css")) }}
  {{ require_css(get_asset_url("../css/base/base-styles.css")) }}

  {{ require_css(get_asset_url("../css/pages/past-events.css")) }}

  {{ require_js(get_asset_url("../js/main.js")) }}
  {{ standard_header_includes }}
  {{ require_css(get_asset_url("../css/FontAwesome.css")) }}
  {{ require_css(get_asset_url("../css/theme-overrides.css")) }}
</head>

{% block body %}

{% set hubdbTable = "4660473" %} {# !IMPORTANT: CHANGE HUBDB TABLE ID BEFORE SETTING LIVE #}
{% set previousEventsFilter = "&orderBy=-date" %}
{% set previousEvents = hubdb_table_rows(hubdbTable, previousEventsFilter) %}

<main class="main-container">
  <section class="card-collection past-events">
    <div
      class="card-collection__event-inner responsive-page-width lateral-spacing"
    >
      <h2 class="card-collection__heading responsive-page-width">
        Recent Events
      </h2>
      <div class="card-collection-results">
        {% for event in previousEvents %}
          {% set eventThumb_desktop = resize_image_url(event.thumbnail.url, 0, 0, 375) %}
          {% set eventThumb_mobile = resize_image_url(event.thumbnail.url, 0, 0, 260) %}

          <article class="card-item">
            <div class="card-item__content">
              <div class="card-item__image-container">
                <img class="card-item__image" alt=""
                  {% if event.thumbnail.url is none %}

                  {% else %}
                    srcset="{{eventThumb_mobile}} 260w,
                            {{eventThumb_desktop}} 375w"
                    sizes="(max-width: 425px) 260px, 375px"
                    src="{{eventThumb_desktop}}"
                  {% endif %}
                 />

                <small
                  class="card-item__label card-item__label--type"
                >
                  {{ event.type.name }}
                </small>
                <small
                  class="card-item__label card-item__label--duration"
                >
                  {{ event.duration }}
                </small>
                {% if event.internal %}
                  <small
                    class="card-item__label card-item__label--internal"
                  >
                    Internal Event
                  </small>
                {% endif %}
              </div>
              <div class="card-item__text-container">
                <div class="card-item__text-container-inner truncated">
                  <header class="card-item__header">
                    <time
                      class="card-item__metadata"
                      datetime="{{ event.date|datetimeformat('%Y-%m-%d') }}"
                    >
                      {{ event.date|datetimeformat('%a %e %b %Y') }}
                    </time>
                    <h4 class="card-item__title">
                      {{ event.name }}
                    </h4>
                  </header>
                  <p class="card-item__description">
                    {{ event.description }}
                  </p>
                </div>
                <div class="card-item__button-container">
                  {{snippets.button_primary(
                    classnames="card-item__video-button",
                    url=event.video,
                    target="_blank",
                    text="Watch on YouTube"
                  )}}
                </div>
              </div>
            </div>
          </article>
        {% endfor %}
      </div>
  </section>
</main>

{% endblock body %}
